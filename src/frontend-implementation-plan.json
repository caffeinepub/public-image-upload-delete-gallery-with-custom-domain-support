{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Public image gallery (upload/list/view/delete) UI with custom-domain-safe configuration",
  "requirements": [
    {
      "id": "REQ-2",
      "summary": "Provide a public UI to upload images, view them in a gallery, and delete them with clear loading/error states.",
      "acceptanceCriteria": [
        "Page includes an image upload control that accepts common image types (e.g., PNG/JPEG/WebP/GIF) and triggers an upload to the backend",
        "Gallery view shows all uploaded images returned by the backend list method",
        "Each gallery item includes a delete action that removes the image via the backend and updates the UI",
        "UI displays clear error messages for failed uploads/deletes and a loading state during network calls"
      ],
      "file_operations": [
        {
          "path": "frontend/src/backend.d.ts",
          "operation": "modify",
          "description": "Add the frontend type surface for the backend image storage capabilities (upload, list metadata, fetch by id, delete by id) so UI calls are typed and consistent."
        },
        {
          "path": "frontend/src/lib/backendClient.ts",
          "operation": "create",
          "description": "Create a small backend client wrapper used by the gallery UI to call backend capabilities (upload/list/fetch/delete) and centralize error normalization (no hard-coded host assumptions). Use the core-infrastructure component to support backend connection configuration (verify the component's usage instructions before implementing)."
        },
        {
          "path": "frontend/src/hooks/useImageGallery.ts",
          "operation": "create",
          "description": "Create a React hook (TanStack Query-based) that provides list refresh, upload mutation (with progress), and delete mutation, plus loading/error state shaping for the UI."
        },
        {
          "path": "frontend/src/components/gallery/ImageUploader.tsx",
          "operation": "create",
          "description": "Create an uploader component that accepts common image types, validates basic constraints client-side, triggers upload, and renders progress + error states. Use the blob-storage component (ExternalBlob) to support streaming-friendly uploads and upload progress callbacks; verify the component's usage instructions before implementing."
        },
        {
          "path": "frontend/src/components/gallery/GalleryGrid.tsx",
          "operation": "create",
          "description": "Create a gallery grid component that renders all returned images (using direct image URLs when available) with per-item loading/error states for delete. Use the blob-storage component (ExternalBlob.getDirectURL or equivalent) to support efficient image display; verify the component's usage instructions before implementing."
        },
        {
          "path": "frontend/src/components/gallery/GalleryItemCard.tsx",
          "operation": "create",
          "description": "Create a gallery item card with thumbnail/preview, metadata display (filename, size, timestamp, content type when available), and a delete action with confirmation and optimistic UI considerations."
        },
        {
          "path": "frontend/src/App.tsx",
          "operation": "create",
          "description": "Create the main app view that composes the uploader + gallery components, renders loading/error messaging, and ensures the gallery refreshes after upload/delete."
        },
        {
          "path": "frontend/src/main.tsx",
          "operation": "modify",
          "description": "Wire the new App into the React entry so the upload + gallery UI is reachable as the primary experience."
        }
      ]
    },
    {
      "id": "REQ-3",
      "summary": "Ensure frontend configuration works on custom domains and add custom domain connection guidance documentation.",
      "acceptanceCriteria": [
        "Project includes written instructions describing how to connect a custom domain to the deployed app on the Internet Computer (high-level steps, what values the user must obtain, and where they are applied)",
        "Frontend uses environment/config patterns so API calls resolve correctly regardless of whether the app is accessed via default canister URL or a custom domain"
      ],
      "file_operations": [
        {
          "path": "frontend/CUSTOM_DOMAIN.md",
          "operation": "create",
          "description": "Add high-level custom domain setup guidance for the Internet Computer deployment, including what values to obtain (e.g., canister URL / asset canister target, DNS records, certificate/HTTPS considerations) and where they are applied in deployment tooling."
        },
        {
          "path": "frontend/src/config/runtime.ts",
          "operation": "create",
          "description": "Create a runtime config module that derives network/host settings from environment variables and the current browser origin (window.location), avoiding hard-coded localhost or canister-domain assumptions."
        },
        {
          "path": "frontend/src/lib/backendClient.ts",
          "operation": "modify",
          "description": "Update the backend client wrapper to use runtime config for resolving the backend connection details so calls function under both default canister URLs and custom domains. Use the core-infrastructure component to support backend connection configuration (verify the component's usage instructions before implementing)."
        }
      ]
    },
    {
      "id": "REQ-4",
      "summary": "Apply a cohesive warm-neutral visual theme suitable for an image gallery (no blue/purple primary).",
      "acceptanceCriteria": [
        "App has a consistent look and feel across upload controls, gallery cards, and buttons (typography, spacing, and color usage are unified)",
        "Theme uses a non-blue/purple primary palette (e.g., warm neutrals with a contrasting accent color)"
      ],
      "file_operations": [
        {
          "path": "frontend/src/index.css",
          "operation": "create",
          "description": "Create the global stylesheet with a cohesive gallery theme using warm neutrals and a contrasting accent (not blue/purple), and define CSS variables consumed by Tailwind/shadcn tokens for consistent typography/spacing."
        },
        {
          "path": "frontend/tailwind.config.js",
          "operation": "modify",
          "description": "Adjust theme token usage as needed to align with the warm-neutral palette and ensure consistent styling across gallery components (without introducing blue/purple as primary)."
        },
        {
          "path": "frontend/src/App.tsx",
          "operation": "modify",
          "description": "Apply the theme consistently in the layout (header, hero section, uploader section, gallery cards/buttons) by composing existing shadcn-ui components (verify the component's usage instructions before implementing)."
        }
      ]
    },
    {
      "id": "REQ-5",
      "summary": "Add required generated static images and render them from frontend/public/assets/generated (logo + hero/banner).",
      "acceptanceCriteria": [
        "Generated images are placed under frontend/public/assets/generated and referenced directly by the UI (not served via the backend)",
        "At least the logo is visible in the app UI (e.g., header) and the hero/banner is used in a top-of-page section"
      ],
      "file_operations": [
        {
          "path": "frontend/public/assets/generated/site-logo.dim_256x256.png",
          "operation": "create",
          "description": "Add the generated static logo asset at frontend/public/assets/generated/site-logo.dim_256x256.png for direct UI rendering."
        },
        {
          "path": "frontend/public/assets/generated/hero-banner.dim_1400x400.png",
          "operation": "create",
          "description": "Add the generated static hero/banner asset at frontend/public/assets/generated/hero-banner.dim_1400x400.png for direct UI rendering."
        },
        {
          "path": "frontend/src/App.tsx",
          "operation": "modify",
          "description": "Render frontend/public/assets/generated/site-logo.dim_256x256.png in the header and frontend/public/assets/generated/hero-banner.dim_1400x400.png in a top-of-page hero section, referencing them as static assets (not via backend)."
        }
      ]
    }
  ]
}